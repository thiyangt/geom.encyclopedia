{
  "hash": "933e5ba71319d1dbeacbb42dfa471af6",
  "result": {
    "engine": "knitr",
    "markdown": "# geom_s  {#sec-s}\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n:::\n\n\n## geom_smooth\n\n**Package**\n\nggplot2 [@ggplot2]\n\n**Description**\n\nAdd a smooth curve or line to a scatter plot for visulizing trend between x and y variable.\n\n**See also**\n\n[geom_point](#point)\n\n**Understandable aesthetics**\n\n- Required aesthetics\n  - x, y\n  \n- Optional aesthetics\n  - alpha, colour, fill, group, linetype, linewidth, weight, ymax, ymin\n  \n**The statistical transformation to use on the data for this layer**\n\n- smooth\n\n**Example**\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\np1 <- worldbankdata |>\n  filter(Country == \"Sri Lanka\" ) |>\n  filter(Year >= 2013 & Year <= 2021) |> \n  ggplot(aes(x=Year, y=Electricity)) + \n  geom_point() +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) + \n  scale_x_continuous(breaks = 2000:2021)  + \n\n  ggtitle(\"geom_point_only\")\n\np2 <- worldbankdata |> \n  filter(Country == \"Sri Lanka\" ) |>\n  filter(Year >= 2013 & Year <= 2021) |>\n  ggplot(aes(x=Year, y=Electricity)) + \n  geom_smooth() +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) + \n  scale_x_continuous(breaks = 2000:2021)  + \n  ggtitle(\"geom_smoth_only\")\n\np3 <- worldbankdata |>\n  filter(Country == \"Sri Lanka\" ) |> \n  filter(Year >= 2013 & Year <= 2021) |>\n  ggplot(aes(x=Year, y=Electricity)) + \n  geom_point() +\n  geom_smooth() +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) + \n  scale_x_continuous(breaks = 2000:2021)  + \n  ggtitle(\"geom_point + geom_smooth: loess\")\n\np4 <- worldbankdata |> \n  filter(Country == \"Sri Lanka\" ) |>\n  filter(Year >= 2013 & Year <= 2021) |> \n  ggplot(aes(x=Year, y=Electricity)) + \n  geom_point() +\n  geom_smooth(method = \"lm\") +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) + \n  scale_x_continuous(breaks = 2000:2021)  + \n  ggtitle(\"geom_point + geom_smooth:lm\")\n\n(p1 + p2)/(p3+p4)\n```\n\n::: {.cell-output-display}\n![](s_files/figure-html/unnamed-chunk-3-1.png){width=960}\n:::\n:::\n\n\n## geom_segment\n\n**Package**\n\nggplot2 [@ggplot2]\n\n**Description**\n\nAdd a straight line segment between two points. \n\n**Understandable aesthetics**\n\n- Required aesthetics\n  - x, y, xend or yend\n  \n- Optional aesthetics\n  - alpha, colour, group, linetype, linewidth\n  \n**The statistical transformation to use on the data for this layer**\n\n- identity\n\n**See Also**\n\n- geom_curve(), geom_path(), geom_line(), geom_spoke()\n\n**Examples**\n\n**Example 1: simulated data**\n\n\n::: {.cell}\n\n```{.r .cell-code}\np1 <- ggplot() + \n  geom_segment(aes(x = 3, y = 4, xend = 25, yend = 25)) +\n  theme_minimal() +\n  coord_cartesian(ylim = c(0, 30), xlim = c(0, 30)) +\n  theme_bw()+\n  ggtitle(\"geom_segment_only\")\n\n\ndata <- data.frame(\n  x_start = c(1.5, 2.6, 4.1, 5.1),\n  y_start = c(1.2, 2, 2.2, 2.8),\n  x_end = c(2.6, 4.1, 5.1, 6),\n  y_end = c(2, 2.2, 2.8, 4))\n\np2 <- ggplot(data) +\n  geom_segment(aes(x = x_start, y = y_start, xend = x_end, yend = y_end),\n               color = \"black\", size = 0.5, \n               arrow = arrow(type = \"closed\", length = unit(0.2, \"inches\"))) +\n  labs(x = \"X Axis\",\n       y = \"Y Axis\") +\n  ggtitle(\"geom_segment with direction\")\np1+p2\n```\n\n::: {.cell-output-display}\n![](s_files/figure-html/unnamed-chunk-4-1.png){width=960}\n:::\n:::\n\n\n\n**Example 2: Application data**\n\n\n::: {.cell}\n\n```{.r .cell-code}\nSL_segments <- worldbankdata |> \n  filter(Country == \"Sri Lanka\" & Year > 2013) |> \n     mutate(\n    x_end = lead(Year), \n    y_end = lead(Electricity)  \n  ) |> \n  filter(!is.na(x_end) & !is.na(y_end))\n\n ggplot(SL_segments) +\n  geom_segment(aes(x = Year, y = Electricity, xend = x_end, \n                   yend = y_end),\n               color = \"blue\", size = 0.5, arrow = arrow(type = \"closed\", length = unit(0.2, \"inches\"))) +\n  labs(x = \"Year\",\n       y = \"Electricity Consumption\",\n       title = \"Sri Lanka Electricity Consumption Over Time (geom_segment)\")\n```\n\n::: {.cell-output-display}\n![](s_files/figure-html/unnamed-chunk-5-1.png){width=480}\n:::\n:::\n\n\n\n## geom_spoke\n\n**Package**\n\nggplot2 [@ggplot2]\n\n**Description**\n\n- Creates radial line segments (spokes) from a central point, where each spoke is defined by its angle and radius. This is useful for visualizing directions or vectors.\n\n**Understandable aesthetics**\n\n- Required aesthetics\n  - x, y, angle, radius\n  \n- Optional aesthetics\n  - alpha, colour, group, linetype, linewidth\n  \n**The statistical transformation to use on the data for this layer**\n\n- identity\n\n**Examples**\n\n**Example: Simulated data**\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(8)\ndata <- tibble(\n  x = runif(10, 1, 10),      # Random x-coordinates\n  y = runif(10, 1, 10),      # Random y-coordinates\n  angle = runif(10, 0, 2 * pi),  # Random angles in radians\n  radius = runif(10, 0.5, 2) # Random lengths for spokes\n)\n\n\nggplot(data, aes(x = x, y = y)) +\n  geom_spoke(aes(angle = angle, radius = radius),\n             color = \"blue\", size = 0.5) +\n  labs(x = \"X-Axis\", \n       y = \"Y-Axis\", \n       title = \"geom_spoke\") \n```\n\n::: {.cell-output-display}\n![](s_files/figure-html/unnamed-chunk-6-1.png){width=480}\n:::\n:::\n\n\n**Example: Practical application data**\n\n\n::: {.cell}\n\n```{.r .cell-code}\nSL <- worldbankdata |> \n  filter(Country == \"Sri Lanka\" & Year > 2013)\n\n# Prepare the data for geom_spoke\nSL_segments <- SL |> \n  mutate(\n    x_end = lead(Year),  # Next year\n    y_end = lead(Electricity)  # Next year's electricity value\n  ) |> \n  filter(!is.na(x_end) & !is.na(y_end)) |> \n  mutate(\n    angle = atan2(y_end - Electricity, x_end - Year),  # Angle in radians\n    radius = sqrt((x_end - Year)^2 + (y_end - Electricity)^2)  # Euclidean distance\n  )\n\n# Plot with geom_spoke\nggplot(SL_segments, aes(x = Year, y = Electricity, color=as.factor(Year))) +\n  geom_spoke(aes(angle = angle, radius = radius), size = 1) +\n  scale_color_brewer(type = \"qual\", palette = 2) +\n  labs(x = \"Year\",\n       y = \"Electricity Consumption\",\n       title = \"Sri Lanka Electricity Consumption Over Time (geom_spoke)\")\n```\n\n::: {.cell-output-display}\n![](s_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n## geom_step\n\n\n**Package**\n\nggplot2 [@ggplot2]\n\n**Description**\n\n- Create stairstep plot: Connect observations in the order in which they appear in the data by stairs. \n\n**Understandable aesthetics**\n\n- Required aesthetics\n  - x, y\n  \n- Optional aesthetics\n  - alpha, colour, group, linetype, linewidth\n  \n**The statistical transformation to use on the data for this layer**\n\n- identity\n\n**See Also**\n\n- geom_path(), geom_line(), geom_polygon(), geom_segment()\n\n**Example**\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\np1 <- worldbankdata |> \n  filter(Country == \"Bangladesh\") |>\n  filter(Year >= 2013 & Year <= 2021) |>\n  ggplot(aes(x=Year, y=Electricity)) + \n  geom_point() + \n  scale_x_continuous(breaks = 2013:2021)  + \n  ggtitle(\"geom_point only\")\n\np2 <- worldbankdata |> \n  filter(Country == \"Sri Lanka\") |>\n  filter(Year >= 2013 & Year <= 2021) |>\n  ggplot(aes(x=Year, y=Electricity)) + \n  geom_step(color = \"red\", size = 1) + \n  scale_x_continuous(breaks = 2013:2021)  + \n  ggtitle(\"geom_step only\")\n\np1 + p2 \n```\n\n::: {.cell-output-display}\n![](s_files/figure-html/unnamed-chunk-8-1.png){width=960}\n:::\n:::\n\n\n## geom_sf\n\n**Package**\n\nggplot2 [@ggplot2]\n\n\n**Description**\n\n- Visualize sf objects.\n\n**Understandable aesthetics**\n  \n- Required aesthetics\n  - simple feature geometry\n  \n- Optional aesthetics\n  - alpha, colour, group, fill\n  \n**The statistical transformation to use on the data for this layer**\n\n- sf\n\n**See Also**\n\n- geom_sf_label(), geom_sf_text() \n\n**Example**\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(rnaturalearth)\nlibrary(rnaturalearthdata)\n\n# Load world spatial data\nworld <- ne_countries(scale = \"medium\", returnclass = \"sf\")\n\nelectricity_data <- worldbankdata |> filter(Year == 2020)\nworld_electricity <- world |> \n  left_join(electricity_data, by = c(\"name\" = \"Country\"))\n\nggplot(data = world_electricity) +\n  geom_sf(aes(fill = Electricity), color = \"black\", size = 0.1) +\n  scale_fill_viridis_c(option = \"plasma\", na.value = \"grey90\") +\n  labs(\n    title = \"Percentage of Population Access to Electricity by Country\",\n    fill = \"Electricity\")\n```\n\n::: {.cell-output-display}\n![](s_files/figure-html/unnamed-chunk-9-1.png){width=960}\n:::\n:::\n\n\n## geom_sf_label\n\n**Package**\n\nggsflabel [@ggsflabel\n]\n\n```r\n# install.packages(\"devtools\")\ndevtools::install_github(\"yutannihilation/ggsflabel\")\n```\n\n**Description**\n\n- Add text labels to spatial features in a plot created with geom_sf()\n\n**Understandable aesthetics**\n\n- Required aesthetics\n  - label\n  \n- Optional aesthetics\n  - alpha, colour, group, fill\n  \n**The statistical transformation to use on the data for this layer**\n\n- sf_coordinates\n\n**See Also**\n\n- geom_sf(), geom_sf_text()\n\n**Example**\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(rnaturalearth)\nlibrary(rnaturalearthdata)\n\n# Load world spatial data\nworld <- ne_countries(scale = \"medium\", returnclass = \"sf\")\n\nelectricity_data <- worldbankdata |> filter(Year == 2020)\nworld_electricity <- world |> \n  left_join(electricity_data, by = c(\"name\" = \"Country\"))\n\ncountries_to_label <- world_electricity |> head(10)\n\nggplot(data = world_electricity) +\n  geom_sf(aes(fill = Electricity), color = \"black\", size = 0.1) +\n   geom_sf_label(data = countries_to_label, aes(label = name), size = 3, label.padding = unit(0.1, \"lines\")) +\n  scale_fill_viridis_c(option = \"plasma\", na.value = \"grey90\") +\n  labs(\n    title = \"Percentage of Population Access to Electricity by Country\",\n    fill = \"Electricity\")\n```\n\n::: {.cell-output-display}\n![](s_files/figure-html/unnamed-chunk-10-1.png){width=960}\n:::\n:::\n\n\n## geom_sf_text\n\nggsflabel [@ggsflabel\n]\n\n```r\n# install.packages(\"devtools\")\ndevtools::install_github(\"yutannihilation/ggsflabel\")\n```\n\n**Description**\n\n- Add text labels to spatial features in a plot created with geom_sf() without the background box. It is a similar approach as with geom_sf_label().\n\n**Understandable aesthetics**\n\n- Required aesthetics\n  - label\n  \n- Optional aesthetics\n  - alpha, colour, group, fill\n  \n**The statistical transformation to use on the data for this layer**\n\n- sf_coordinates\n\n**See Also**\n\n- geom_sf(), geom_sf_label()\n\n**Example**\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(rnaturalearth)\nlibrary(rnaturalearthdata)\n\n# Load world spatial data\nworld <- ne_countries(scale = \"medium\", returnclass = \"sf\")\n\nelectricity_data <- worldbankdata |> filter(Year == 2020)\nworld_electricity <- world |> \n  left_join(electricity_data, by = c(\"name\" = \"Country\"))\n\ncountries_to_label <- world_electricity |> head(10)\n\nggplot(data = world_electricity) +\n  geom_sf(aes(fill = Electricity), color = \"black\", size = 0.1) +\n   geom_sf_text(data = countries_to_label, aes(label = name), size = 3, label.padding = unit(0.1, \"lines\")) +\n  scale_fill_viridis_c(option = \"plasma\", na.value = \"grey90\") +\n  labs(\n    title = \"Percentage of Population Access to Electricity by Country\",\n    fill = \"Electricity\")\n```\n\n::: {.cell-output-display}\n![](s_files/figure-html/unnamed-chunk-11-1.png){width=960}\n:::\n:::\n",
    "supporting": [
      "s_files\\figure-html"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}