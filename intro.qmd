# Data and setting up your workflow {.unnumbered}

The goal of this chapter is to provide readers with an overview of the datasets used in the book’s examples. Having an initial understanding of the data helps readers easily navigate between the examples.

## Installation of associated packages

To run the examples in the book you need to install the following packages. In addition, to this package list, the associated package corresponds to the geom should be installed. The `drone` package provides the datasets associated with this geom encyclopedia.

```r
#install.packages(drone)
#install.packages("devtools")
devtools::install_github("thiyangt/drone")
install.packages(tidyverse)
install.packages(patchwork)
```

# Data set use in the geom Encyclopedia



The datasets used in the book, main are from country-wise statistics obtained from public reliable websites. Only two datasets are used to explain all geoms so that readers can build intuition by seeing the same data represented in multiple ways. The reasons for using these datasets are:

- The dataset context is familiar and easily understood by individuals from diverse backgrounds.

- Ability to create cross-sectional, time-series, spatial, and spatio-temporal visualizations.

- Ability to visualize relationships between qualitative–qualitative, qualitative–quantitative, and quantitative–quantitative variables.

- Experience addressing common data challenges such as missing values, overplotting, and large-scale datasets.


## **WorldHappinessScore** dataset

The dataset is obtained from World Population Review report (@worldpopulationreview_happiest).  The World Happiness Score is reported on a 0–10 scale, with higher values indicating greater happiness. This dataset containes the world happiness score for 145 countries. The variable description is given in @tbl-WorldHappinessScore.

```{r}
#| label: tbl-WorldHappinessScore
#| echo: false
#| tbl-cap: "Variable Description for WorldHappinessScore dataset"
library(knitr)
library(kableExtra)
Variable <- c("flagCode", "country", "WorldHappinessScore_2024", "WorldHappinessScore_2023", "WorldHappinessScore_2022")
description <- c("Country flag code", "Country name", "World happiness score for 2024", "World happiness score for 2023" , "World happiness score for 2022")
df <- data.frame(Variable, Description = description)
df |> kbl() |>
  kable_paper("hover", full_width = F)
```

The first few rows of the dataset is shown below

```{r}
library(drone)
head(WorldHappinessScore)
```

### `WorldHappinessScore`: Data Profiling

@tbl-hp provides a compact summary of the dataset.There are 5 variables. Among the 2 are character variables and 3 are numeric variables. Summary of both character variables and numeric variables are given in the output. For character variables, 

  `n_missing` tells how many values are missing for each variable.

  `complete_rate` is the proportion of non-missing values.

  `n_unique `  is the number of unique values in the variable.

For numeric variables @tbl-hp shows mean, sd (standard deviation), p0 (min), percentiles: p25, p50 (median), p75, p100 (max), and a small histogram for each numeric variable.

```{r}
#| label: tbl-hp
#| message: false
#| warning: false
#| echo: false
#| tbl-cap: "Summary description of the WorldHappinessScore dataset"
library(skimr)
WorldHappinessScore |> 
  skim()
```

### `WorldHappinessScore`: Data Quality Analysis

@fig-happy2 shows the types of variables we have in the dataset and missing value distribution.

```{r, message=FALSE, warning=FALSE}
#| label: fig-happy2
#| message: false
#| warning: false
#| fig-cap: "Summary description of the WorldHappinessScore dataset"
library(tidyverse)
library(visdat)
vis_dat(WorldHappinessScore) + 
  scale_fill_brewer(palette = "Dark2")
```



@fig-happy3 shows combination-wise missing values in the dataset `WorldHappinessScore`. There are 6 observations where only `WorldHapinessScore_2023` missing and there are 3 observations where both `WorldHapinessScore_2023` and `WorldHapinessScore_2024` missing.

```{r}
#| label: fig-happy3
#| message: false
#| warning: false
#| fig-cap: "Combinations of missingness across cases: WorldHappinessScore dataset"
library(naniar)
gg_miss_upset(WorldHappinessScore) 
```



## **worldbankdata** dataset

This dataset provides country-level development indicators compiled from the World Bank Data Catalogue. It includes information on access to clean cooking fuels, access to electricity, income group classification, and regional grouping across multiple years.

The variable description is given in @tbl-worldbankdata.

```{r}
#| label: tbl-worldbankdata
#| echo: false
#| tbl-cap: "Variable Description for worldbankdata dataset"
library(knitr)
library(kableExtra)
Variable <- c("Country", "Code", "Region", "Year", "Cooking", "Electricity", "Income")
description <- c("Country name", "ISO country code", "World Bank regional classification", "Year of observation" , "Access to clean fuels and technologies for cooking (percentage of population).", "Access to electricity (percentage of population).",
"Income group classification: L = Low income, LM = Lower middle income, UM = Upper middle income, HI = High income.")
df <- data.frame(Variable, Description = description)
df |> kbl() |>
  kable_paper("hover", full_width = F)
```

To view the dataset use the following code.


```{r}
library(drone)
library(tibble)
data(worldbankdata)
worldbankdata
```

### `worldbankdata`: Data Profiling

@tbl-worldbankdatasummary provides a compact summary of the dataset. The dataset contains 7 variables. Among them, 4 variables are factor variables and 3 variables are numeric variables. In addtion, @tbl-worldbankdatasummary  shows a comprehensive overview of your dataset, showing both the distribution of categorical variables and the summary statistics for numeric variables, including missing values and frequency counts.

```{r}
#| label: tbl-worldbankdatasummary
#| echo: false
#| message: false
#| warning: false
#| tbl-cap: "Summary description of the workldbank dataset"
library(skimr)
worldbankdata |> 
  skim()
```

### `worldbankdata`: Data Quality Analysis

`worldbankdata` dataset contains some missing values. @fig-miss shows the distribution of types of variables and missing value distribution.

```{r}
#| label: fig-miss
#| message: false
#| warning: false
#| fig-cap: "Data types and missing values distribution"
library(tidyverse)
library(visdat)
vis_dat(worldbankdata) + 
  scale_fill_brewer(palette = "Dark2")
```
@fig-miss2 shows  combinations of missingness across cases.   This is especially useful for understanding patterns of missingness across variables. For example, there are 5122 rows where both `Electricity` and `Cooking` variable missing.


```{r}
#| label: fig-miss2
#| message: false
#| warning: false
#| fig-cap: "Combinations of missingness across cases: worldbankdata dataset"
library(naniar)
gg_miss_upset(worldbankdata) 
```



