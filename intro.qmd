# Data and setting up your workflow {.unnumbered}

The goal of this chapter is to provide readers with an overview of the datasets used in the book’s examples. Having an initial understanding of the data helps readers easily navigate between the examples.

## Installation of associated packages

To run the examples in the book you need to install the following packages. In addition, to this package list, the associated package corresponds to the geom should be installed. The `drone` package provides the datasets associated with this geom encyclopedia.

```r
#install.packages(drone)
#install.packages("devtools")
devtools::install_github("thiyangt/drone")
install.packages(tidyverse)
install.packages(patchwork)
```

## Data set use in the geom Encyclopedia



The datasets used in the book coming from country-wise statistics obtained from public reliable websites. Only two datasets are used to explain all geoms so that readers can build intuition by seeing the same data represented in multiple ways. The reasons for using these datasets are:

- The dataset context is familiar and easily understood by individuals from diverse backgrounds.

- Ability to create cross-sectional, time-series, spatial, and spatio-temporal visualizations.

- Ability to visualize relationships between qualitative–qualitative, qualitative–quantitative, and quantitative–quantitative variables.

- Experience addressing common data challenges such as missing values, overplotting, and large-scale datasets.

## Why two datasets?

Different visualizations often require datasets to be in specific formats depending on the purpose of analysis or presentation. In this context, one dataset is organized in the long (tidy) format, while another is arranged in the wide format. The `happiness_gdp_income dataset` has time values spread across multiple columns, making it suitable for wide-format representation. In contrast, the `worldbankdata` dataset stores time in a single column, following the long-format structure. It is important to note that these datasets are not simply the reverse of each other; each format serves a distinct analytical or visualization purpose.


## Dataset 1: **happiness_gdp_income** 

The dataset is obtained from World Population Review report (@worldpopulationreview_happiest). Happiness score and GDP per Capita are accessed @chotchaeva2017world via the [link](https://zenodo.org/records/1470906).  Income level data are accessed from the World Bank Data Catalogue @worldbank_wdi_2026 via the [link](https://datacatalog.worldbank.org/search/dataset/0037712/world-development-indicators) on 11 February 2026. 

The variable description is given in @tbl-WorldHappinessScore.

```{r}
#| label: tbl-WorldHappinessScore
#| echo: false
#| tbl-cap: "Variable Description for happiness_gdp_income dataset"
library(knitr)
library(kableExtra)
Variable <- c("Country",
              "Region",
              "HappinessScore2015",
              "GDPpercapita2015",  
              "HappinessScore2016",
              "GDPpercapita2016",
              "HappinessScore2017",
              "GDPpercapita2017", 
              "Income2015",
              "Income2016",        
              "Income2017" )
description <- c("Country name", 
                 "World Bank regional classification",
                 "Happiness Score 2015", 
                 "GDP per Capita 2015" ,
                 "Happiness Score 2016",
                 "GDP per Capita 2016",
                 "Happiness Score 2017",
                 "GDP per Capita 2017",
                 "Income level categorization in 2015",
                 "Income level categorization in 2016",
                 "Income level categorization in 2017")
df <- data.frame(Variable, Description = description)
df |> kbl() |>
  kable_paper("hover", full_width = F)
```

The first few rows of the dataset is shown below

```{r}
library(drone)
head(happiness_gdp_income)
```

### `happiness_gdp_income`: Data Profiling

@tbl-hp provides a compact summary of the dataset.There are 5 variables. Among the 2 are character variables and 3 are numeric variables. Summary of both character variables and numeric variables are given in the output. For character variables, 

  `n_missing` tells how many values are missing for each variable.

  `complete_rate` is the proportion of non-missing values.

  `n_unique `  is the number of unique values in the variable.

For numeric variables @tbl-hp shows mean, sd (standard deviation), p0 (min), percentiles: p25, p50 (median), p75, p100 (max), and a small histogram for each numeric variable.

```{r}
#| label: tbl-hp
#| message: false
#| warning: false
#| echo: false
#| tbl-cap: "Summary description of the happiness_gdp_income dataset"
library(skimr)
happiness_gdp_income |> 
  skim()
```

### `happiness_gdp_income`: Data Quality Analysis

@fig-happy2 shows the types of variables we have in the dataset and missing value distribution.

```{r, message=FALSE, warning=FALSE}
#| label: fig-happy2
#| message: false
#| warning: false
#| fig-cap: "Summary description of the happiness_gdp_income dataset"
library(tidyverse)
library(visdat)
vis_dat(happiness_gdp_income) + 
  scale_fill_brewer(palette = "Dark2")
```



@fig-happy3 shows combination-wise missing values in the dataset `happiness_gdp_income`. There are 6 observations where only `WorldHapinessScore_2023` missing and there are 3 observations where both `WorldHapinessScore_2023` and `WorldHapinessScore_2024` missing.

```{r}
#| label: fig-happy3
#| message: false
#| warning: false
#| fig-cap: "Combinations of missingness across cases: WorldHappinessScore dataset"
library(naniar)
gg_miss_upset(happiness_gdp_income) 
```



## Dataset 2: **worldbankdata** 

This dataset provides country-level development indicators compiled from the World Bank Data Catalogue (@worldbank_gni_2026). It includes information on access to clean cooking fuels, access to electricity, income group classification, and regional grouping across multiple years.

The variable description is given in @tbl-worldbankdata.

```{r}
#| label: tbl-worldbankdata
#| echo: false
#| tbl-cap: "Variable Description for worldbankdata dataset"
library(knitr)
library(kableExtra)
Variable <- c("Country", "Code", "Region", "Year", "Cooking", "Electricity", "Income")
description <- c("Country name", "ISO country code", "World Bank regional classification", "Year of observation" , "Access to clean fuels and technologies for cooking (percentage of population).", "Access to electricity (percentage of population).",
"Income group classification: L = Low income, LM = Lower middle income, UM = Upper middle income, HI = High income.")
df <- data.frame(Variable, Description = description)
df |> kbl() |>
  kable_paper("hover", full_width = F)
```

To view the dataset use the following code.


```{r}
library(drone)
library(tibble)
data(worldbankdata)
worldbankdata
```

### `worldbankdata`: Data Profiling

@tbl-worldbankdatasummary provides a compact summary of the dataset. The dataset contains 7 variables. Among them, 4 variables are factor variables and 3 variables are numeric variables. In addtion, @tbl-worldbankdatasummary  shows a comprehensive overview of your dataset, showing both the distribution of categorical variables and the summary statistics for numeric variables, including missing values and frequency counts.

```{r}
#| label: tbl-worldbankdatasummary
#| echo: false
#| message: false
#| warning: false
#| tbl-cap: "Summary description of the workldbank dataset"
library(skimr)
worldbankdata |> 
  skim()
```

### `worldbankdata`: Data Quality Analysis

`worldbankdata` dataset contains some missing values. @fig-miss shows the distribution of types of variables and missing value distribution.

```{r}
#| label: fig-miss
#| message: false
#| warning: false
#| fig-cap: "Data types and missing values distribution"
library(tidyverse)
library(visdat)
vis_dat(worldbankdata) + 
  scale_fill_brewer(palette = "Dark2")
```
@fig-miss2 shows  combinations of missingness across cases.   This is especially useful for understanding patterns of missingness across variables. For example, there are 5122 rows where both `Electricity` and `Cooking` variable missing.


```{r}
#| label: fig-miss2
#| message: false
#| warning: false
#| fig-cap: "Combinations of missingness across cases: worldbankdata dataset"
library(naniar)
gg_miss_upset(worldbankdata) 
```



